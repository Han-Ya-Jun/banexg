package utils

import (
	"fmt"
	"testing"
)

func TestAlignTfSecsOffset(t *testing.T) {
	cases := [][3]int64{
		{604800, 1740988222, 1740960000}, // 2025-03-03 -> 2025-03-03
		{604800, 1741074622, 1740960000}, // 2025-03-04
		{604800, 1741161022, 1740960000}, // 2025-03-05
		{604800, 1741247422, 1740960000}, // 2025-03-06
		{604800, 1741333822, 1740960000}, // 2025-03-07
		{604800, 1741420222, 1740960000}, // 2025-03-08
		{604800, 1741506379, 1740960000}, // 2025-03-09 -> 2025-03-03
		{86400, 1741506379, 1741478400},  // 2025-03-09
	}
	for _, v := range cases {
		tfSecs := int(v[0])
		_, offset := GetTfAlignOrigin(tfSecs)
		out := AlignTfSecsOffset(v[1], tfSecs, offset)
		if out != v[2] {
			t.Errorf("fail, input: %v, cur: %v, expect: %v", v[1], out, v[2])
		}
	}
	// 2025-03-06T14:00:00.000Z ->  2025-03-07T00:00:00.000Z
	out := AlignTfSecs(1741269600+50400, 86400)
	fmt.Println(out)
}
